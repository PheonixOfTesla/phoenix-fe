<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0, maximum-scale=1.0, user-scalable=no">
    <meta name="apple-mobile-web-app-capable" content="yes">
    <meta name="apple-mobile-web-app-status-bar-style" content="black-translucent">
    <meta name="description" content="Phoenix - The Most Sophisticated AI Life Companion">
    <title>Phoenix F1 - AI Life Operating System</title>
    <link rel="stylesheet" href="styles.css">
    <link rel="stylesheet" href="/phoenix-voice.css">
</head>
<body>
    <!-- ============================================ -->
    <!-- LOADING SCREEN -->
    <!-- ============================================ -->
    <div id="loading" style="position:fixed;top:0;left:0;width:100%;height:100%;background:#000;display:flex;flex-direction:column;align-items:center;justify-content:center;z-index:10000;transition:opacity 1s">
        <div style="font-size:64px;color:#00ffff;text-shadow:0 0 30px rgba(0,255,255,1);letter-spacing:12px;margin-bottom:30px;animation:pulse 2s infinite">PHOENIX F1</div>
        <div style="width:60px;height:60px;border:3px solid rgba(0,255,255,0.2);border-top-color:#00ffff;border-radius:50%;animation:spin 1s linear infinite"></div>
        <div style="margin-top:30px;color:rgba(0,255,255,0.7);font-size:14px;letter-spacing:2px">INITIALIZING AI SYSTEMS...</div>
        <div style="margin-top:15px;color:rgba(0,255,255,0.5);font-size:11px;letter-spacing:1px">15 ADVANCED MODULES ‚Ä¢ 307 ENDPOINTS</div>
    </div>

    <!-- ============================================ -->
    <!-- FIRST-TIME SYNC PROMPT -->
    <!-- ============================================ -->
    <div id="sync-prompt" style="position:fixed;top:0;left:0;width:100%;height:100%;background:rgba(0,0,0,0.98);z-index:9500;display:none;align-items:center;justify-content:center;flex-direction:column">
        <div style="max-width:600px;padding:40px;text-align:center">
            <div style="font-size:48px;color:#00ffff;margin-bottom:20px;text-shadow:0 0 30px rgba(0,255,255,1)">‚ö°</div>
            <div style="font-size:32px;color:#00ffff;margin-bottom:20px;text-shadow:0 0 20px rgba(0,255,255,1);letter-spacing:4px">SYNC YOUR LIFE</div>
            <div style="font-size:16px;color:rgba(0,255,255,0.7);line-height:1.8;margin-bottom:30px">
                Connect your devices, calendars, banks, and goals to unlock Phoenix F1's full potential.
                The more data I have, the smarter I become.
            </div>
            <div id="sync-checklist" style="text-align:left;margin-bottom:30px;padding:20px;background:rgba(0,255,255,0.05);border:1px solid rgba(0,255,255,0.3);border-radius:8px">
                <!-- Dynamically populated -->
            </div>
            <div style="display:flex;gap:15px;justify-content:center">
                <button onclick="startFullSync()" style="padding:15px 40px;background:rgba(0,255,255,0.2);border:2px solid #00ffff;color:#00ffff;font-family:inherit;font-size:14px;cursor:pointer;border-radius:8px;letter-spacing:2px;font-weight:bold">
                    START SYNC
                </button>
                <button onclick="skipSync()" style="padding:15px 40px;background:transparent;border:1px solid rgba(0,255,255,0.3);color:rgba(0,255,255,0.6);font-family:inherit;font-size:14px;cursor:pointer;border-radius:8px;letter-spacing:2px">
                    SKIP FOR NOW
                </button>
            </div>
        </div>
    </div>

    <!-- ============================================ -->
    <!-- HUD FRAME & CORNER BRACKETS -->
    <!-- ============================================ -->
    <div class="hud-frame">
        <div class="corner-bracket top-left"></div>
        <div class="corner-bracket top-right"></div>
        <div class="corner-bracket bottom-left"></div>
        <div class="corner-bracket bottom-right"></div>
    </div>

    <!-- ============================================ -->
    <!-- VISUAL EFFECTS LAYERS -->
    <!-- ============================================ -->
    <div class="grid-underlay"></div>
    <div class="vhs-overlay"></div>

    <!-- ============================================ -->
    <!-- PERSONALIZED GREETING -->
    <!-- ============================================ -->
    <div id="greeting" style="position:fixed;top:20%;left:50%;transform:translateX(-50%);text-align:center;z-index:500;opacity:0;animation:fadeIn 1s 1s forwards;pointer-events:none">
        <div class="greeting-main" style="font-size:36px;color:#00ffff;margin-bottom:10px;text-shadow:0 0 20px rgba(0,255,255,1)">Welcome Back</div>
        <div class="greeting-sub" style="font-size:14px;color:rgba(0,255,255,0.6)">All systems operational ‚Ä¢ F1 Mode Active</div>
    </div>

    <!-- ============================================ -->
    <!-- TOP LEFT HUD: TIME, DATE, WEATHER, LOCATION -->
    <!-- ============================================ -->
    <div id="hud-tl" style="position:fixed;top:20px;left:20px;z-index:1000;pointer-events:none;padding:15px;background:rgba(0,10,20,0.9);border:1px solid rgba(0,255,255,0.3);backdrop-filter:blur(10px);border-radius:8px;min-width:240px">
        <!-- Time Display -->
        <div style="font-size:9px;color:rgba(0,255,255,0.5);letter-spacing:1px">LOCAL TIME</div>
        <div id="time-display" style="font-size:20px;color:#00ffff;font-weight:bold;text-shadow:0 0 10px rgba(0,255,255,0.8);margin-bottom:12px">--:--</div>
        
        <!-- Date Display -->
        <div style="font-size:9px;color:rgba(0,255,255,0.5);letter-spacing:1px">DATE</div>
        <div id="date-display" style="font-size:12px;color:#00ffff;margin-bottom:12px">---</div>
        
        <!-- Location (IP Geolocation) -->
        <div style="font-size:9px;color:rgba(0,255,255,0.5);letter-spacing:1px">LOCATION</div>
        <div id="location-display" style="font-size:11px;color:#00ffff;margin-bottom:5px;display:flex;align-items:center;gap:6px">
            <span id="location-icon">üìç</span>
            <span id="location-text">Detecting...</span>
        </div>
        
        <!-- Weather Widget -->
        <div style="font-size:9px;color:rgba(0,255,255,0.5);letter-spacing:1px;margin-top:10px">WEATHER</div>
        <div id="weather-display" style="display:flex;align-items:center;gap:10px;margin-top:6px;padding:8px;background:rgba(0,255,255,0.05);border-radius:6px">
            <span id="weather-icon" style="font-size:24px">‚òÄÔ∏è</span>
            <div style="flex:1">
                <div id="weather-temp" style="font-size:16px;color:#00ffff;font-weight:bold">--¬∞F</div>
                <div id="weather-condition" style="font-size:10px;color:rgba(0,255,255,0.7)">Loading...</div>
            </div>
        </div>
    </div>

    <!-- ============================================ -->
    <!-- TOP RIGHT HUD: RECOVERY & SYNC STATUS -->
    <!-- ============================================ -->
    <div id="hud-tr" style="position:fixed;top:20px;right:20px;z-index:1000;pointer-events:auto;text-align:right;padding:15px;background:rgba(0,10,20,0.9);border:1px solid rgba(0,255,255,0.3);backdrop-filter:blur(10px);border-radius:8px;min-width:180px">
        <!-- Recovery Score -->
        <div style="font-size:9px;color:rgba(0,255,255,0.5);letter-spacing:1px">RECOVERY</div>
        <div id="recovery-value" style="font-size:24px;color:#00ffff;font-weight:bold;margin:5px 0">--</div>
        <div style="width:140px;height:6px;background:rgba(0,255,255,0.2);margin:8px 0;border-radius:3px;overflow:hidden">
            <div id="recovery-fill" style="width:0%;height:100%;background:linear-gradient(90deg, #00ffff, #00ff88);transition:width 0.5s;box-shadow:0 0 10px rgba(0,255,255,0.6)"></div>
        </div>
        <div id="recovery-status" style="font-size:9px;color:rgba(0,255,255,0.6);margin-bottom:12px">Analyzing...</div>
        
        <!-- Sync Status Button -->
        <button id="sync-status-btn" onclick="openSyncPanel()" style="width:100%;padding:10px;background:rgba(0,255,255,0.1);border:1px solid rgba(0,255,255,0.3);color:#00ffff;font-family:inherit;font-size:11px;cursor:pointer;border-radius:6px;letter-spacing:1px;display:flex;align-items:center;justify-content:center;gap:8px;transition:all 0.3s">
            <span id="sync-icon">‚ö°</span>
            <span id="sync-text">SYNC</span>
        </button>
    </div>

    <!-- ============================================ -->
    <!-- BOTTOM LEFT HUD: SYSTEM STATUS & INTEGRATIONS -->
    <!-- ============================================ -->
    <div id="hud-bl" style="position:fixed;bottom:20px;left:20px;z-index:1000;pointer-events:none;padding:15px;background:rgba(0,10,20,0.9);border:1px solid rgba(0,255,255,0.3);backdrop-filter:blur(10px);border-radius:8px;min-width:200px">
        <div style="font-size:9px;color:rgba(0,255,255,0.5);letter-spacing:1px">SYSTEM STATUS</div>
        <div id="status-display" style="font-size:13px;color:#00ff88;font-weight:bold;margin:5px 0;display:flex;align-items:center;gap:8px">
            <span style="width:8px;height:8px;background:#00ff88;border-radius:50%;box-shadow:0 0 10px #00ff88;animation:pulse 2s infinite"></span>
            F1 MODE ACTIVE
        </div>
        
        <!-- Connected Services -->
        <div style="margin-top:12px;padding-top:12px;border-top:1px solid rgba(0,255,255,0.2)">
            <div style="font-size:9px;color:rgba(0,255,255,0.5);letter-spacing:1px;margin-bottom:8px">CONNECTED</div>
            <div id="connected-services" style="display:flex;flex-wrap:wrap;gap:6px">
                <!-- Dynamically populated -->
            </div>
        </div>
        
        <!-- AI Processing -->
        <div id="ai-processing" style="margin-top:12px;padding-top:12px;border-top:1px solid rgba(0,255,255,0.2);display:none">
            <div style="font-size:9px;color:rgba(0,255,255,0.5);letter-spacing:1px;margin-bottom:6px">AI PROCESSING</div>
            <div style="font-size:10px;color:#00ffff;display:flex;align-items:center;gap:6px">
                <div style="width:12px;height:12px;border:2px solid rgba(0,255,255,0.3);border-top-color:#00ffff;border-radius:50%;animation:spin 1s linear infinite"></div>
                <span id="ai-status-text">Analyzing...</span>
            </div>
        </div>
    </div>

    <!-- ============================================ -->
    <!-- BOTTOM RIGHT: VOICE CONTROLS -->
    <!-- ============================================ -->
    <div class="voice-controls" style="position:fixed;bottom:20px;right:20px;z-index:6000;display:flex;flex-direction:column;gap:10px;align-items:flex-end">
        <!-- Voice Button -->
        <button class="voice-btn" onclick="toggleVoice(); toggleConversationPanel();" style="padding:14px 28px;background:rgba(0,255,255,0.1);border:2px solid rgba(0,255,255,0.5);color:#00ffff;font-size:14px;cursor:pointer;border-radius:8px;transition:all 0.3s;display:flex;align-items:center;gap:10px;font-weight:bold;letter-spacing:1px;pointer-events:auto">
            <span style="font-size:20px">üéôÔ∏è</span>
            TALK TO PHOENIX
        </button>
        
        <!-- Voice Personality Selector -->
        <select class="voice-selector" onchange="changeVoice(this.value)" style="padding:8px 12px;background:rgba(0,10,20,0.9);border:1px solid rgba(0,255,255,0.3);color:#00ffff;font-size:11px;cursor:pointer;border-radius:6px;outline:none;pointer-events:auto">
            <option value="echo">üá¨üáß Echo - British Butler</option>
            <option value="nova" selected>üòä Nova - Friendly Helper</option>
            <option value="onyx">üíº Onyx - Professional</option>
            <option value="fable">‚ú® Fable - Storyteller</option>
            <option value="shimmer">üå∏ Shimmer - Gentle Guide</option>
            <option value="alloy">‚ö° Alloy - Efficient</option>
        </select>
    </div>

    <!-- ============================================ -->
    <!-- SYNC PANEL - COMPREHENSIVE CONNECTION CENTER -->
    <!-- ============================================ -->
    <div id="sync-panel" style="position:fixed;top:0;left:0;width:100%;height:100%;background:rgba(0,0,0,0.98);z-index:9000;display:none;overflow-y:auto">
        <div style="max-width:1200px;margin:0 auto;padding:40px 20px">
            <!-- Header -->
            <div style="display:flex;justify-content:space-between;align-items:center;margin-bottom:40px">
                <div>
                    <div style="font-size:36px;color:#00ffff;text-shadow:0 0 20px rgba(0,255,255,1);letter-spacing:4px;margin-bottom:10px">SYNC CENTER</div>
                    <div style="font-size:14px;color:rgba(0,255,255,0.6)">Connect all your life systems ‚Ä¢ <span id="sync-count">0</span> of 6 Planets Connected</div>
                </div>
                <button onclick="closeSyncPanel()" style="width:50px;height:50px;background:rgba(0,10,20,0.9);border:2px solid rgba(0,255,255,0.5);border-radius:50%;display:flex;align-items:center;justify-content:center;cursor:pointer;font-size:24px;color:#00ffff">
                    ‚úï
                </button>
            </div>

            <!-- Sync All Button -->
            <button id="sync-all-btn" onclick="syncAllPlanets()" style="width:100%;padding:20px;background:linear-gradient(135deg, rgba(0,255,255,0.2), rgba(0,255,136,0.2));border:2px solid #00ffff;color:#00ffff;font-family:inherit;font-size:16px;cursor:pointer;border-radius:8px;letter-spacing:2px;font-weight:bold;margin-bottom:40px;box-shadow:0 0 30px rgba(0,255,255,0.3);transition:all 0.3s">
                ‚ö° SYNC ALL PLANETS NOW
            </button>

            <!-- Planetary Systems Grid -->
            <div style="display:grid;grid-template-columns:repeat(auto-fit, minmax(350px, 1fr));gap:20px">
                <!-- MERCURY - Health & Biometrics -->
                <div class="sync-card" data-planet="mercury">
                    <div style="display:flex;justify-content:space-between;align-items:start;margin-bottom:15px">
                        <div>
                            <div style="font-size:24px;color:#ff6b35;margin-bottom:8px">üí™ MERCURY</div>
                            <div style="font-size:16px;color:#ff6b35;font-weight:bold;margin-bottom:4px">HEALTH & RECOVERY</div>
                            <div style="font-size:11px;color:rgba(255,107,53,0.7)">Wearables ‚Ä¢ Biometrics ‚Ä¢ Sleep ‚Ä¢ Recovery</div>
                        </div>
                        <div id="mercury-status" class="status-badge" style="padding:6px 12px;background:rgba(255,107,53,0.1);border:1px solid rgba(255,107,53,0.3);border-radius:4px;font-size:10px;color:#ff6b35">
                            NOT CONNECTED
                        </div>
                    </div>
                    
                    <div class="device-list" style="margin:15px 0">
                        <div class="device-item" data-device="fitbit">
                            <span>‚åö Fitbit</span>
                            <button onclick="connectDevice('fitbit')" class="connect-btn">CONNECT</button>
                        </div>
                        <div class="device-item" data-device="polar">
                            <span>‚ù§Ô∏è Polar</span>
                            <button onclick="connectDevice('polar')" class="connect-btn">CONNECT</button>
                        </div>
                    </div>
                    
                    <div style="font-size:10px;color:rgba(255,107,53,0.6);line-height:1.6;margin-top:12px">
                        <strong>38 endpoints:</strong> HRV, Heart Rate, Sleep Analysis, Recovery Score, Readiness, Body Composition, Metabolic Rate, Training Load
                    </div>
                </div>

                <!-- VENUS - Fitness & Nutrition -->
                <div class="sync-card" data-planet="venus">
                    <div style="display:flex;justify-content:space-between;align-items:start;margin-bottom:15px">
                        <div>
                            <div style="font-size:24px;color:#ff66ff;margin-bottom:8px">üçΩÔ∏è VENUS</div>
                            <div style="font-size:16px;color:#ff66ff;font-weight:bold;margin-bottom:4px">FITNESS & NUTRITION</div>
                            <div style="font-size:11px;color:rgba(255,102,255,0.7)">Workouts ‚Ä¢ Meals ‚Ä¢ Macros ‚Ä¢ AI Planning</div>
                        </div>
                        <div id="venus-status" class="status-badge">
                            NOT CONNECTED
                        </div>
                    </div>
                    
                    <button onclick="setupVenus()" style="width:100%;padding:12px;background:rgba(255,102,255,0.1);border:1px solid rgba(255,102,255,0.3);color:#ff66ff;font-family:inherit;font-size:12px;cursor:pointer;border-radius:6px;letter-spacing:1px;margin:15px 0">
                        SETUP NUTRITION & FITNESS
                    </button>
                    
                    <div style="font-size:10px;color:rgba(255,102,255,0.6);line-height:1.6;margin-top:12px">
                        <strong>77 endpoints:</strong> Quantum Workouts, Meal Planning, Macro Tracking, Supplement Timing, Injury Prevention, Form Analysis, Progress Photos
                    </div>
                </div>

                <!-- EARTH - Calendar & Energy -->
                <div class="sync-card" data-planet="earth">
                    <div style="display:flex;justify-content:space-between;align-items:start;margin-bottom:15px">
                        <div>
                            <div style="font-size:24px;color:#00ff88;margin-bottom:8px">üåç EARTH</div>
                            <div style="font-size:16px;color:#00ff88;font-weight:bold;margin-bottom:4px">TIME & ENERGY</div>
                            <div style="font-size:11px;color:rgba(0,255,136,0.7)">Calendar ‚Ä¢ Energy Optimization ‚Ä¢ Scheduling</div>
                        </div>
                        <div id="earth-status" class="status-badge">
                            NOT CONNECTED
                        </div>
                    </div>
                    
                    <div class="device-list" style="margin:15px 0">
                        <div class="device-item" data-device="google-calendar">
                            <span>üìÖ Google Calendar</span>
                            <button onclick="connectCalendar('google')" class="connect-btn">CONNECT</button>
                        </div>
                    </div>
                    
                    <div style="font-size:10px;color:rgba(0,255,136,0.6);line-height:1.6;margin-top:12px">
                        <strong>11 endpoints:</strong> Calendar Sync, Energy Mapping, Conflict Detection, Optimal Meeting Times, Energy Prediction, Schedule Optimization
                    </div>
                </div>

                <!-- MARS - Goals & Habits -->
                <div class="sync-card" data-planet="mars">
                    <div style="display:flex;justify-content:space-between;align-items:start;margin-bottom:15px">
                        <div>
                            <div style="font-size:24px;color:#ff4444;margin-bottom:8px">üéØ MARS</div>
                            <div style="font-size:16px;color:#ff4444;font-weight:bold;margin-bottom:4px">GOALS & PROGRESS</div>
                            <div style="font-size:11px;color:rgba(255,68,68,0.7)">Goals ‚Ä¢ Habits ‚Ä¢ Milestones ‚Ä¢ Tracking</div>
                        </div>
                        <div id="mars-status" class="status-badge">
                            NOT CONNECTED
                        </div>
                    </div>
                    
                    <button onclick="setupMars()" style="width:100%;padding:12px;background:rgba(255,68,68,0.1);border:1px solid rgba(255,68,68,0.3);color:#ff4444;font-family:inherit;font-size:12px;cursor:pointer;border-radius:6px;letter-spacing:1px;margin:15px 0">
                        CREATE FIRST GOAL
                    </button>
                    
                    <div style="font-size:10px;color:rgba(255,68,68,0.6);line-height:1.6;margin-top:12px">
                        <strong>20 endpoints:</strong> SMART Goals, Habit Tracking, Progress Velocity, Predictions, Bottleneck Analysis, Motivational Interventions
                    </div>
                </div>

                <!-- JUPITER - Finance -->
                <div class="sync-card" data-planet="jupiter">
                    <div style="display:flex;justify-content:space-between;align-items:start;margin-bottom:15px">
                        <div>
                            <div style="font-size:24px;color:#ffaa00;margin-bottom:8px">üí∞ JUPITER</div>
                            <div style="font-size:16px;color:#ffaa00;font-weight:bold;margin-bottom:4px">WEALTH & FINANCE</div>
                            <div style="font-size:11px;color:rgba(255,170,0,0.7)">Banking ‚Ä¢ Spending ‚Ä¢ Budgets ‚Ä¢ Correlations</div>
                        </div>
                        <div id="jupiter-status" class="status-badge">
                            NOT CONNECTED
                        </div>
                    </div>
                    
                    <button onclick="connectPlaid()" style="width:100%;padding:12px;background:rgba(255,170,0,0.1);border:1px solid rgba(255,170,0,0.3);color:#ffaa00;font-family:inherit;font-size:12px;cursor:pointer;border-radius:6px;letter-spacing:1px;margin:15px 0">
                        CONNECT BANK ACCOUNTS
                    </button>
                    
                    <div style="font-size:10px;color:rgba(255,170,0,0.6);line-height:1.6;margin-top:12px">
                        <strong>17 endpoints:</strong> Transaction Tracking, Spending Patterns, Budget Alerts, Recurring Detection, Stress-Money Correlation
                    </div>
                </div>

                <!-- SATURN - Legacy -->
                <div class="sync-card" data-planet="saturn">
                    <div style="display:flex;justify-content:space-between;align-items:start;margin-bottom:15px">
                        <div>
                            <div style="font-size:24px;color:#8844ff;margin-bottom:8px">‚è≥ SATURN</div>
                            <div style="font-size:16px;color:#8844ff;font-weight:bold;margin-bottom:4px">LEGACY & LONGEVITY</div>
                            <div style="font-size:11px;color:rgba(136,68,255,0.7)">Long-term Health ‚Ä¢ Life Timeline ‚Ä¢ Aging</div>
                        </div>
                        <div id="saturn-status" class="status-badge">
                            NOT CONNECTED
                        </div>
                    </div>
                    
                    <button onclick="setupSaturn()" style="width:100%;padding:12px;background:rgba(136,68,255,0.1);border:1px solid rgba(136,68,255,0.3);color:#8844ff;font-family:inherit;font-size:12px;cursor:pointer;border-radius:6px;letter-spacing:1px;margin:15px 0">
                        SETUP LONGEVITY PROFILE
                    </button>
                    
                    <div style="font-size:10px;color:rgba(136,68,255,0.6);line-height:1.6;margin-top:12px">
                        <strong>30 endpoints:</strong> Longevity Score, Aging Analysis, Life Timeline, Health Trajectory, Biological Age vs Chronological Age
                    </div>
                </div>
            </div>
        </div>
    </div>

    <!-- ============================================ -->
    <!-- CIRCULAR ACTION MENU -->
    <!-- ============================================ -->
    <div id="action-menu" style="position:fixed;top:50%;left:50%;transform:translate(-50%,-50%);z-index:8000;display:none">
        <div style="position:relative;width:400px;height:400px">
            <!-- Workout (Mercury) -->
            <div class="action-button-circular" id="action-workout" data-tooltip="Log workouts, view performance" style="position:absolute;top:10%;left:50%;transform:translate(-50%,-50%);width:80px;height:80px;background:rgba(0,10,20,0.9);border:2px solid rgba(255,107,53,0.5);border-radius:50%;display:flex;flex-direction:column;align-items:center;justify-content:center;cursor:pointer;transition:all 0.3s">
                <div style="font-size:28px;margin-bottom:5px">üí™</div>
                <div style="font-size:10px;color:#ff6b35;letter-spacing:1px;font-weight:bold">WORKOUT</div>
            </div>
            
            <!-- Meal (Venus) -->
            <div class="action-button-circular" id="action-meal" data-tooltip="Log meals, track macros" style="position:absolute;top:30%;right:10%;transform:translate(50%,-50%);width:80px;height:80px;background:rgba(0,10,20,0.9);border:2px solid rgba(255,102,255,0.5);border-radius:50%;display:flex;flex-direction:column;align-items:center;justify-content:center;cursor:pointer;transition:all 0.3s">
                <div style="font-size:28px;margin-bottom:5px">üçΩÔ∏è</div>
                <div style="font-size:10px;color:#ff66ff;letter-spacing:1px;font-weight:bold">MEAL</div>
            </div>
            
            <!-- Intelligence (Phoenix F1) -->
            <div class="action-button-circular" id="action-intelligence" data-tooltip="AI Pattern Discovery" style="position:absolute;bottom:30%;right:10%;transform:translate(50%,50%);width:80px;height:80px;background:rgba(0,10,20,0.9);border:2px solid rgba(0,255,255,0.5);border-radius:50%;display:flex;flex-direction:column;align-items:center;justify-content:center;cursor:pointer;transition:all 0.3s">
                <div style="font-size:28px;margin-bottom:5px">üß†</div>
                <div style="font-size:10px;color:#00ffff;letter-spacing:1px;font-weight:bold">INTEL</div>
            </div>
            
            <!-- Chat (Phoenix AI) -->
            <div class="action-button-circular" id="action-chat" data-tooltip="Talk to Phoenix AI" style="position:absolute;bottom:10%;left:50%;transform:translate(-50%,50%);width:80px;height:80px;background:rgba(0,10,20,0.9);border:2px solid rgba(0,255,255,0.5);border-radius:50%;display:flex;flex-direction:column;align-items:center;justify-content:center;cursor:pointer;transition:all 0.3s">
                <div style="font-size:28px;margin-bottom:5px">üí¨</div>
                <div style="font-size:10px;color:#00ffff;letter-spacing:1px;font-weight:bold">CHAT</div>
            </div>
            
            <!-- Predictions (Phoenix F1) -->
            <div class="action-button-circular" id="action-predictions" data-tooltip="7-30 Day Forecasting" style="position:absolute;bottom:30%;left:10%;transform:translate(-50%,50%);width:80px;height:80px;background:rgba(0,10,20,0.9);border:2px solid rgba(138,43,226,0.5);border-radius:50%;display:flex;flex-direction:column;align-items:center;justify-content:center;cursor:pointer;transition:all 0.3s">
                <div style="font-size:28px;margin-bottom:5px">üîÆ</div>
                <div style="font-size:10px;color:#8a2be2;letter-spacing:1px;font-weight:bold">PREDICT</div>
            </div>
            
            <!-- Interventions (Phoenix F1) -->
            <div class="action-button-circular" id="action-interventions" data-tooltip="Autonomous AI Suggestions" style="position:absolute;top:30%;left:10%;transform:translate(-50%,-50%);width:80px;height:80px;background:rgba(0,10,20,0.9);border:2px solid rgba(0,255,136,0.5);border-radius:50%;display:flex;flex-direction:column;align-items:center;justify-content:center;cursor:pointer;transition:all 0.3s">
                <div style="font-size:28px;margin-bottom:5px">ü§ñ</div>
                <div style="font-size:10px;color:#00ff88;letter-spacing:1px;font-weight:bold">AUTO</div>
            </div>
        </div>
    </div>

    <!-- ============================================ -->
    <!-- PLANET DETAIL MODAL -->
    <!-- ============================================ -->
    <div id="planet-detail" style="position:fixed;top:0;left:0;width:100%;height:100%;background:rgba(0,0,0,0.98);z-index:7000;display:none;overflow-y:auto">
        <div id="close-detail" style="position:fixed;top:30px;right:30px;width:50px;height:50px;background:rgba(0,10,20,0.9);border:2px solid rgba(0,255,255,0.5);border-radius:50%;display:flex;align-items:center;justify-content:center;cursor:pointer;font-size:24px;color:#00ffff;z-index:7100;transition:all 0.3s">
            ‚úï
        </div>
        
        <div style="padding:40px;text-align:center">
            <div id="detail-title" style="font-size:36px;color:#00ffff;text-shadow:0 0 20px rgba(0,255,255,1);margin-bottom:10px">LOADING...</div>
            <div id="detail-subtitle" style="font-size:14px;color:rgba(0,255,255,0.6);margin-bottom:30px">Fetching data...</div>
        </div>
        
        <div id="detail-content" style="padding:40px;max-width:1200px;margin:0 auto">
            <!-- Dynamic content loaded by Phoenix F1 modules -->
        </div>
    </div>

    <!-- ============================================ -->
    <!-- QUICK ACTIONS BAR - PHOENIX F1 -->
    <!-- ============================================ -->
    <div id="quick-actions" style="position:fixed;bottom:80px;left:50%;transform:translateX(-50%);display:flex;gap:12px;z-index:6000;opacity:0;animation:fadeIn 1s 2s forwards;flex-wrap:wrap;justify-content:center;max-width:90%;padding:0 20px">
        <button id="quick-workout" class="quick-action-btn" onclick="openWorkoutModal()">
            üí™ WORKOUT
        </button>
        <button id="quick-meal" class="quick-action-btn" onclick="openMealModal()">
            üçΩÔ∏è MEAL
        </button>
        <button id="quick-intelligence" class="quick-action-btn" onclick="showIntelligenceDashboard()">
            üß† INTELLIGENCE
        </button>
        <button id="quick-predictions" class="quick-action-btn" onclick="showPredictions()">
            üîÆ PREDICT
        </button>
        <button id="quick-interventions" class="quick-action-btn" onclick="showInterventions()">
            ü§ñ AUTO
        </button>
        <button id="quick-live" class="quick-action-btn" onclick="showLiveMonitor()">
            üì° LIVE
        </button>
        <button id="quick-devices" class="quick-action-btn" onclick="showDeviceManager()">
            ‚åö DEVICES
        </button>
        <button id="quick-butler" class="quick-action-btn" onclick="toggleButlerPanel()">
            ü§µ BUTLER
        </button>
    </div>

    <!-- ============================================ -->
    <!-- THREE.JS SOLAR SYSTEM CONTAINER -->
    <!-- ============================================ -->
    <div id="container"></div>

    <!-- ============================================ -->
    <!-- PHOENIX CORE - CENTER SPHERE -->
    <!-- ============================================ -->
    <div id="phoenix-core-container" style="position:fixed;top:50%;left:50%;transform:translate(-50%,-50%);width:200px;height:200px;z-index:500;pointer-events:auto;cursor:pointer">
        <!-- Orbital Rings -->
        <div style="position:absolute;top:0;left:0;width:100%;height:100%">
            <div style="position:absolute;top:50%;left:50%;transform:translate(-50%,-50%);width:100%;height:100%;border:1px solid rgba(0,255,255,0.4);border-radius:50%;animation:coreRotate 20s linear infinite"></div>
            <div style="position:absolute;top:50%;left:50%;transform:translate(-50%,-50%);width:120%;height:120%;border:1px dashed rgba(0,255,255,0.3);border-radius:50%;animation:coreRotate 15s linear infinite reverse"></div>
            <div style="position:absolute;top:50%;left:50%;transform:translate(-50%,-50%);width:140%;height:140%;border:1px dotted rgba(0,255,255,0.2);border-radius:50%;animation:coreRotate 25s linear infinite"></div>
        </div>
        
        <!-- Core Sphere -->
        <div id="phoenix-sphere" style="position:absolute;top:50%;left:50%;transform:translate(-50%,-50%);width:100px;height:100px;background:radial-gradient(circle,rgba(0,255,255,0.8),rgba(0,255,255,0.2));border-radius:50%;display:flex;align-items:center;justify-content:center;box-shadow:0 0 50px rgba(0,255,255,0.8),inset 0 0 30px rgba(0,255,255,0.4);animation:corePulse 2s ease-in-out infinite">
            <div style="font-size:12px;font-weight:bold;color:#00ffff;text-shadow:0 0 10px rgba(0,255,255,1);letter-spacing:2px;z-index:1">PHOENIX</div>
            <div style="font-size:8px;color:rgba(0,255,255,0.8);position:absolute;bottom:35%;letter-spacing:1px">F1</div>
        </div>
        
        <!-- Particle Canvas -->
        <canvas id="phoenix-particles" width="200" height="200" style="position:absolute;top:0;left:0;pointer-events:none"></canvas>
    </div>

    <!-- ============================================ -->
    <!-- ENERGY BEAMS (SVG) -->
    <!-- ============================================ -->
    <svg id="energy-beams" style="position:fixed;top:0;left:0;width:100%;height:100%;pointer-events:none;z-index:450"></svg>

    <!-- ============================================ -->
    <!-- CONVERSATION PANEL -->
    <!-- ============================================ -->
    <div id="conversation-panel" style="position:fixed;bottom:100px;right:24px;z-index:9997;background:rgba(0,10,20,0.95);border:2px solid rgba(0,255,255,0.5);border-radius:12px;padding:20px;max-width:400px;max-height:500px;display:none;backdrop-filter:blur(10px);box-shadow:0 0 40px rgba(0,255,255,0.3);overflow-y:auto">
        <div style="display:flex;justify-content:space-between;align-items:center;margin-bottom:15px">
            <div style="font-size:18px;color:#00ffff;font-weight:bold;text-shadow:0 0 10px rgba(0,255,255,0.8)">
                üí¨ Conversation
            </div>
            <button onclick="toggleConversationPanel()" style="background:transparent;border:1px solid rgba(0,255,255,0.3);color:#00ffff;padding:4px 12px;border-radius:4px;cursor:pointer;font-size:11px">
                CLOSE
            </button>
        </div>
        
        <div id="conversation-container" style="display:flex;flex-direction:column;gap:10px;margin-bottom:15px;max-height:300px;overflow-y:auto">
            <!-- Messages appear here dynamically -->
        </div>
        
        <!-- Text Input Alternative to Voice -->
        <div style="display:flex;gap:8px;border-top:1px solid rgba(0,255,255,0.3);padding-top:15px">
            <input type="text" id="text-input" placeholder="Type or use voice..." onkeypress="if(event.key==='Enter' && this.value.trim()) { sendMessage(this.value); this.value=''; }" style="flex:1;padding:10px;background:rgba(0,255,255,0.1);border:1px solid rgba(0,255,255,0.3);color:#00ffff;border-radius:6px;outline:none;font-size:12px">
            <button onclick="const input = document.getElementById('text-input'); if(input.value.trim()) { sendMessage(input.value); input.value=''; }" style="padding:10px 20px;background:rgba(0,255,255,0.2);border:1px solid rgba(0,255,255,0.5);color:#00ffff;border-radius:6px;cursor:pointer;font-size:12px;font-weight:bold">
                SEND
            </button>
        </div>
    </div>

    <!-- ============================================ -->
    <!-- BUTLER QUICK ACTIONS PANEL -->
    <!-- ============================================ -->
    <div id="butler-panel" style="position:fixed;bottom:180px;right:24px;z-index:9998;background:rgba(0,10,20,0.95);border:2px solid rgba(0,255,255,0.5);border-radius:12px;padding:20px;max-width:320px;display:none;backdrop-filter:blur(10px);box-shadow:0 0 40px rgba(0,255,255,0.3)">
        <div style="font-size:18px;color:#00ffff;margin-bottom:8px;font-weight:bold;text-shadow:0 0 10px rgba(0,255,255,0.8)">
            ü§µ Butler Actions
        </div>
        <div style="font-size:11px;color:rgba(0,255,255,0.6);margin-bottom:20px">
            Quick actions or use voice commands
        </div>
        
        <div style="display:grid;gap:10px">
            <!-- Food Ordering -->
            <button class="butler-quick-btn" onclick="butlerAction('food')" data-example="Order Thai food from Sukhothai">
                <span style="font-size:20px">üçî</span>
                <span>Order Food</span>
            </button>
            
            <!-- Ride Booking -->
            <button class="butler-quick-btn" onclick="butlerAction('ride')" data-example="Book Uber to airport">
                <span style="font-size:20px">üöó</span>
                <span>Book Ride</span>
            </button>
            
            <!-- Restaurant Reservation -->
            <button class="butler-quick-btn" onclick="butlerAction('reservation')" data-example="Reserve table at Nobu 7pm">
                <span style="font-size:20px">üçΩÔ∏è</span>
                <span>Reserve Table</span>
            </button>
            
            <!-- Calendar Event -->
            <button class="butler-quick-btn" onclick="butlerAction('calendar')" data-example="Add meeting tomorrow 2pm">
                <span style="font-size:20px">üìÖ</span>
                <span>Schedule Event</span>
            </button>
            
            <!-- Email -->
            <button class="butler-quick-btn" onclick="butlerAction('email')" data-example="Send email to John">
                <span style="font-size:20px">üìß</span>
                <span>Send Email</span>
            </button>
            
            <!-- Phone Call -->
            <button class="butler-quick-btn" onclick="butlerAction('call')" data-example="Call Mom">
                <span style="font-size:20px">üìû</span>
                <span>Make Call</span>
            </button>
        </div>
        
        <div style="margin-top:15px;padding-top:15px;border-top:1px solid rgba(0,255,255,0.3)">
            <button onclick="toggleButlerPanel()" style="width:100%;padding:8px;background:transparent;border:1px solid rgba(0,255,255,0.3);color:rgba(0,255,255,0.7);font-size:11px;cursor:pointer;border-radius:6px;transition:all 0.3s">
                CLOSE
            </button>
        </div>
    </div>

    <!-- ============================================ -->
    <!-- VOICE OVERLAY -->
    <!-- ============================================ -->
    <div id="voice-overlay" style="position:fixed;top:0;left:0;width:100%;height:100%;background:rgba(0,0,0,0.95);display:none;align-items:center;justify-content:center;z-index:9000;flex-direction:column">
        <div style="width:200px;height:100px;margin-bottom:30px">
            <canvas id="waveform-canvas" width="200" height="100"></canvas>
        </div>
        <div id="voice-text" style="color:#00ffff;font-size:18px;text-align:center;padding:20px;max-width:80%;margin-bottom:20px;min-height:60px">
            Listening...
        </div>
        <div id="voice-transcript" style="color:#00ffff;font-size:14px;text-align:center;padding:10px;max-width:80%;margin-bottom:10px;min-height:30px;opacity:0.7">
            <!-- Real-time transcript appears here -->
        </div>
        <div id="voice-response" style="color:#00ff88;font-size:16px;text-align:center;padding:20px;max-width:80%;margin-bottom:20px;min-height:40px;background:rgba(0,255,136,0.1);border-radius:8px">
            <!-- AI response appears here -->
        </div>
        <button onclick="window.phoenixAI?.stopListening()" style="margin-top:30px;padding:12px 30px;background:rgba(255,68,68,0.2);border:1px solid rgba(255,68,68,0.5);color:#ff4444;cursor:pointer;border-radius:6px;font-size:12px">
            CANCEL
        </button>
    </div>

    <!-- ============================================ -->
    <!-- WORKOUT LOGGING MODAL -->
    <!-- ============================================ -->
    <div id="workout-modal" style="position:fixed;top:0;left:0;width:100%;height:100%;background:rgba(0,0,0,0.98);display:none;align-items:center;justify-content:center;z-index:10000;overflow-y:auto;padding:20px">
        <div style="background:linear-gradient(135deg, rgba(0,10,20,0.95), rgba(0,10,20,0.9));border:2px solid rgba(0,255,255,0.5);border-radius:12px;padding:40px;max-width:800px;width:100%;max-height:90vh;overflow-y:auto;box-shadow:0 0 50px rgba(0,255,255,0.3)">
            <!-- Header -->
            <div style="display:flex;justify-content:space-between;align-items:center;margin-bottom:30px;padding-bottom:20px;border-bottom:1px solid rgba(0,255,255,0.3)">
                <div style="font-size:28px;color:#00ffff;text-shadow:0 0 20px rgba(0,255,255,1);letter-spacing:3px">üí™ LOG WORKOUT</div>
                <button onclick="closeWorkoutModal()" style="width:40px;height:40px;background:rgba(255,68,68,0.2);border:2px solid rgba(255,68,68,0.5);border-radius:50%;color:#ff4444;font-size:24px;cursor:pointer;display:flex;align-items:center;justify-content:center">‚úï</button>
            </div>

            <!-- Workout Form -->
            <form id="workout-form" onsubmit="submitWorkout(event)">
                <!-- Workout Type & Duration -->
                <div style="display:grid;grid-template-columns:1fr 1fr;gap:15px;margin-bottom:25px">
                    <div>
                        <label style="display:block;font-size:12px;color:rgba(0,255,255,0.7);letter-spacing:1px;margin-bottom:8px">WORKOUT TYPE</label>
                        <select id="workout-type" required style="width:100%;padding:12px 15px;background:rgba(0,255,255,0.05);border:1px solid rgba(0,255,255,0.3);border-radius:6px;color:#00ffff;font-family:inherit;font-size:14px">
                            <option value="strength">üí™ Strength Training</option>
                            <option value="cardio">üèÉ Cardio</option>
                            <option value="hiit">‚ö° HIIT</option>
                            <option value="yoga">üßò Yoga</option>
                            <option value="sports">‚öΩ Sports</option>
                            <option value="other">üéØ Other</option>
                        </select>
                    </div>
                    <div>
                        <label style="display:block;font-size:12px;color:rgba(0,255,255,0.7);letter-spacing:1px;margin-bottom:8px">TOTAL DURATION (min)</label>
                        <input type="number" id="workout-duration" min="1" placeholder="45" required style="width:100%;padding:12px 15px;background:rgba(0,255,255,0.05);border:1px solid rgba(0,255,255,0.3);border-radius:6px;color:#00ffff;font-family:inherit;font-size:14px">
                    </div>
                </div>

                <!-- Exercises Container -->
                <div id="exercises-container" style="margin-bottom:20px">
                    <!-- Exercises dynamically added here -->
                </div>

                <!-- Add Exercise Button -->
                <button type="button" onclick="addExercise()" style="width:100%;padding:15px;background:rgba(0,255,255,0.1);border:2px dashed rgba(0,255,255,0.3);border-radius:8px;color:#00ffff;cursor:pointer;font-family:inherit;font-size:14px;letter-spacing:2px;margin-bottom:20px">
                    ‚ûï ADD ANOTHER EXERCISE
                </button>

                <!-- Overall Workout Notes -->
                <div style="margin-bottom:25px">
                    <label style="display:block;font-size:12px;color:rgba(0,255,255,0.7);letter-spacing:1px;margin-bottom:8px">OVERALL NOTES (Optional)</label>
                    <textarea id="workout-notes" placeholder="How was the workout overall?" rows="3" style="width:100%;padding:12px 15px;background:rgba(0,255,255,0.05);border:1px solid rgba(0,255,255,0.3);border-radius:6px;color:#00ffff;font-family:inherit;font-size:14px;resize:vertical"></textarea>
                </div>

                <!-- Submit Button -->
                <button type="submit" style="width:100%;padding:15px;background:linear-gradient(135deg, rgba(0,255,255,0.2), rgba(0,255,136,0.2));border:2px solid #00ffff;color:#00ffff;font-family:inherit;font-size:16px;cursor:pointer;border-radius:8px;letter-spacing:2px;font-weight:bold">
                    üí™ LOG WORKOUT
                </button>
            </form>

            <!-- Loading State -->
            <div id="workout-loading" style="display:none;text-align:center;padding:20px">
                <div style="width:40px;height:40px;border:3px solid rgba(0,255,255,0.2);border-top-color:#00ffff;border-radius:50%;animation:spin 1s linear infinite;margin:0 auto 15px"></div>
                <div style="color:#00ffff">Logging workout...</div>
            </div>
        </div>
    </div>

    <style>
    .exercise-container {
        background: rgba(0,255,255,0.03);
        border: 1px solid rgba(0,255,255,0.2);
        border-radius: 8px;
        padding: 20px;
        margin-bottom: 20px;
    }
    </style>

    <!-- ============================================ -->
    <!-- MEAL LOGGING MODAL -->
    <!-- ============================================ -->
    <div id="meal-modal" style="position:fixed;top:0;left:0;width:100%;height:100%;background:rgba(0,0,0,0.98);display:none;align-items:center;justify-content:center;z-index:10000;overflow-y:auto;padding:20px">
        <div style="background:linear-gradient(135deg, rgba(0,10,20,0.95), rgba(0,10,20,0.9));border:2px solid rgba(255,102,255,0.5);border-radius:12px;padding:40px;max-width:600px;width:100%;max-height:90vh;overflow-y:auto;box-shadow:0 0 50px rgba(255,102,255,0.3)">
            <!-- Header -->
            <div style="display:flex;justify-content:space-between;align-items:center;margin-bottom:30px;padding-bottom:20px;border-bottom:1px solid rgba(255,102,255,0.3)">
                <div style="font-size:28px;color:#ff66ff;text-shadow:0 0 20px rgba(255,102,255,1);letter-spacing:3px">üçΩÔ∏è LOG MEAL</div>
                <button onclick="closeMealModal()" style="width:40px;height:40px;background:rgba(255,68,68,0.2);border:2px solid rgba(255,68,68,0.5);border-radius:50%;color:#ff4444;font-size:24px;cursor:pointer;display:flex;align-items:center;justify-content:center">‚úï</button>
            </div>

            <!-- Meal Form -->
            <form id="meal-form" onsubmit="submitMeal(event)">
                <!-- Meal Type -->
                <div style="margin-bottom:25px">
                    <label style="display:block;font-size:12px;color:rgba(255,102,255,0.7);letter-spacing:1px;margin-bottom:8px">MEAL TYPE</label>
                    <select id="meal-type" required style="width:100%;padding:12px 15px;background:rgba(255,102,255,0.05);border:1px solid rgba(255,102,255,0.3);border-radius:6px;color:#ff66ff;font-family:inherit;font-size:14px">
                        <option value="breakfast">üåÖ Breakfast</option>
                        <option value="lunch">üåû Lunch</option>
                        <option value="dinner">üåô Dinner</option>
                        <option value="snack">üçé Snack</option>
                        <option value="post-workout">üí™ Post-Workout</option>
                    </select>
                </div>

                <!-- Meal Name -->
                <div style="margin-bottom:25px">
                    <label style="display:block;font-size:12px;color:rgba(255,102,255,0.7);letter-spacing:1px;margin-bottom:8px">WHAT DID YOU EAT?</label>
                    <input type="text" id="meal-name" required placeholder="e.g., Chicken Breast with Rice and Broccoli" style="width:100%;padding:12px 15px;background:rgba(255,102,255,0.05);border:1px solid rgba(255,102,255,0.3);border-radius:6px;color:#ff66ff;font-family:inherit;font-size:14px">
                </div>

                <!-- Macros -->
                <div style="display:grid;grid-template-columns:1fr 1fr 1fr;gap:12px;margin-bottom:25px">
                    <div>
                        <label style="display:block;font-size:11px;color:rgba(255,102,255,0.7);letter-spacing:1px;margin-bottom:8px">PROTEIN (g)</label>
                        <input type="number" id="meal-protein" min="0" placeholder="40" style="width:100%;padding:12px 10px;background:rgba(255,102,255,0.05);border:1px solid rgba(255,102,255,0.3);border-radius:6px;color:#ff66ff;font-family:inherit;font-size:14px">
                    </div>
                    <div>
                        <label style="display:block;font-size:11px;color:rgba(255,102,255,0.7);letter-spacing:1px;margin-bottom:8px">CARBS (g)</label>
                        <input type="number" id="meal-carbs" min="0" placeholder="50" style="width:100%;padding:12px 10px;background:rgba(255,102,255,0.05);border:1px solid rgba(255,102,255,0.3);border-radius:6px;color:#ff66ff;font-family:inherit;font-size:14px">
                    </div>
                    <div>
                        <label style="display:block;font-size:11px;color:rgba(255,102,255,0.7);letter-spacing:1px;margin-bottom:8px">FATS (g)</label>
                        <input type="number" id="meal-fats" min="0" placeholder="15" style="width:100%;padding:12px 10px;background:rgba(255,102,255,0.05);border:1px solid rgba(255,102,255,0.3);border-radius:6px;color:#ff66ff;font-family:inherit;font-size:14px">
                    </div>
                </div>

                <!-- Calories -->
                <div style="margin-bottom:25px">
                    <label style="display:block;font-size:12px;color:rgba(255,102,255,0.7);letter-spacing:1px;margin-bottom:8px">CALORIES</label>
                    <input type="number" id="meal-calories" min="0" placeholder="500" style="width:100%;padding:12px 15px;background:rgba(255,102,255,0.05);border:1px solid rgba(255,102,255,0.3);border-radius:6px;color:#ff66ff;font-family:inherit;font-size:14px">
                </div>

                <!-- Notes -->
                <div style="margin-bottom:25px">
                    <label style="display:block;font-size:12px;color:rgba(255,102,255,0.7);letter-spacing:1px;margin-bottom:8px">NOTES (Optional)</label>
                    <textarea id="meal-notes" placeholder="How did you feel after eating? Where did you eat?" rows="3" style="width:100%;padding:12px 15px;background:rgba(255,102,255,0.05);border:1px solid rgba(255,102,255,0.3);border-radius:6px;color:#ff66ff;font-family:inherit;font-size:14px;resize:vertical"></textarea>
                </div>

                <!-- Submit Button -->
                <button type="submit" style="width:100%;padding:15px;background:linear-gradient(135deg, rgba(255,102,255,0.2), rgba(255,68,255,0.2));border:2px solid #ff66ff;color:#ff66ff;font-family:inherit;font-size:16px;cursor:pointer;border-radius:8px;letter-spacing:2px;font-weight:bold;transition:all 0.3s">
                    üçΩÔ∏è LOG MEAL
                </button>
            </form>

            <!-- Loading State -->
            <div id="meal-loading" style="display:none;text-align:center;padding:20px">
                <div style="width:40px;height:40px;border:3px solid rgba(255,102,255,0.2);border-top-color:#ff66ff;border-radius:50%;animation:spin 1s linear infinite;margin:0 auto 15px"></div>
                <div style="color:#ff66ff">Logging meal...</div>
            </div>
        </div>
    </div>

    <!-- ============================================ -->
    <!-- COMPONENT STYLES -->
    <!-- ============================================ -->
    <style>
        .sync-card {
            background: linear-gradient(135deg, rgba(0,10,20,0.9), rgba(0,10,20,0.7));
            border: 1px solid rgba(0,255,255,0.3);
            border-radius: 8px;
            padding: 20px;
            transition: all 0.3s;
        }
        
        .sync-card:hover {
            border-color: rgba(0,255,255,0.6);
            box-shadow: 0 0 30px rgba(0,255,255,0.2);
            transform: translateY(-2px);
        }
        
        .device-list {
            display: flex;
            flex-direction: column;
            gap: 10px;
        }
        
        .device-item {
            display: flex;
            justify-content: space-between;
            align-items: center;
            padding: 10px;
            background: rgba(0,255,255,0.05);
            border: 1px solid rgba(0,255,255,0.2);
            border-radius: 6px;
            font-size: 12px;
            color: rgba(0,255,255,0.8);
        }
        
        .connect-btn {
            padding: 6px 12px;
            background: rgba(0,255,255,0.1);
            border: 1px solid rgba(0,255,255,0.3);
            color: #00ffff;
            font-family: inherit;
            font-size: 10px;
            cursor: pointer;
            border-radius: 4px;
            letter-spacing: 1px;
            transition: all 0.3s;
        }
        
        .connect-btn:hover {
            background: rgba(0,255,255,0.2);
            border-color: #00ffff;
        }
        
        .connect-btn.connected {
            background: rgba(0,255,136,0.2);
            border-color: #00ff88;
            color: #00ff88;
        }
        
        .status-badge {
            padding: 6px 12px;
            background: rgba(255,68,68,0.1);
            border: 1px solid rgba(255,68,68,0.3);
            border-radius: 4px;
            font-size: 10px;
            color: #ff4444;
            letter-spacing: 1px;
            font-weight: bold;
        }
        
        .status-badge.connected {
            background: rgba(0,255,136,0.2);
            border-color: #00ff88;
            color: #00ff88;
        }

        /* Butler Quick Button Styles */
        .butler-quick-btn {
            display: flex;
            align-items: center;
            gap: 12px;
            padding: 12px 16px;
            background: rgba(0,255,255,0.1);
            border: 1px solid rgba(0,255,255,0.3);
            border-radius: 8px;
            color: #00ffff;
            font-family: inherit;
            font-size: 14px;
            cursor: pointer;
            transition: all 0.3s;
            text-align: left;
            position: relative;
        }
        
        .butler-quick-btn:hover {
            background: rgba(0,255,255,0.2);
            border-color: #00ffff;
            transform: translateX(5px);
            box-shadow: 0 0 20px rgba(0,255,255,0.4);
        }

        /* Quick Action Button Styles */
        .quick-action-btn {
            padding: 10px 20px;
            background: rgba(0,10,20,0.9);
            border: 1px solid rgba(0,255,255,0.3);
            color: #00ffff;
            font-family: inherit;
            font-size: 11px;
            cursor: pointer;
            letter-spacing: 1px;
            transition: all 0.3s;
            border-radius: 6px;
            font-weight: bold;
            white-space: nowrap;
        }
        
        .quick-action-btn:hover {
            background: rgba(0,255,255,0.2);
            border-color: #00ffff;
            box-shadow: 0 0 20px rgba(0,255,255,0.4);
            transform: translateY(-2px);
        }

        /* Circular Action Button Hover */
        .action-button-circular:hover {
            background: rgba(0,255,255,0.2);
            border-color: #00ffff;
            transform: scale(1.15);
            box-shadow: 0 0 30px rgba(0,255,255,0.6);
        }

        /* Service Badge */
        .service-badge {
            display: inline-block;
            padding: 4px 8px;
            background: rgba(0,255,255,0.1);
            border: 1px solid rgba(0,255,255,0.3);
            border-radius: 4px;
            font-size: 9px;
            color: #00ffff;
            letter-spacing: 1px;
        }

        /* Animations */
        @keyframes fadeIn {
            from { opacity: 0; transform: translateY(20px); }
            to { opacity: 1; transform: translateY(0); }
        }

        @keyframes coreRotate {
            from { transform: translate(-50%, -50%) rotate(0deg); }
            to { transform: translate(-50%, -50%) rotate(360deg); }
        }

        @keyframes corePulse {
            0%, 100% { 
                transform: translate(-50%, -50%) scale(1);
                box-shadow: 0 0 50px rgba(0,255,255,0.8);
            }
            50% { 
                transform: translate(-50%, -50%) scale(1.08);
                box-shadow: 0 0 70px rgba(0,255,255,1);
            }
        }

        @keyframes pulse {
            0%, 100% { opacity: 1; transform: scale(1); }
            50% { opacity: 0.7; transform: scale(1.05); }
        }

        @keyframes spin {
            to { transform: rotate(360deg); }
        }
    </style>

    <!-- ============================================ -->
    <!-- THREE.JS LIBRARY -->
    <!-- ============================================ -->
    <script src="https://cdnjs.cloudflare.com/ajax/libs/three.js/r128/three.min.js"></script>

    <!-- ============================================ -->
    <!-- FIRST-TIME USER DETECTION -->
    <!-- ============================================ -->
    <script>
    (function checkOnboarding() {
        const onboardingComplete = localStorage.getItem('phoenixOnboardingComplete');
        
        if (!onboardingComplete || onboardingComplete !== 'true') {
            console.log('üé¨ First-time user detected, redirecting to onboarding...');
            // TEMPORARILY DISABLED FOR TESTING
            // window.location.href = '/onboarding.html';
            // return;
        }
        
        console.log('‚úÖ Returning user, loading Phoenix F1...');
    })();
    </script>
    
    <!-- ============================================ -->
    <!-- PHOENIX CORE ENGINE - WITH REAL API CONNECTIONS -->
    <!-- ============================================ -->
    <script>
        // API Configuration - ACTUAL BACKEND URL
        const API_BASE = 'https://pal-backend-production.up.railway.app/api';
        
        const getAuthHeaders = () => {
            const token = localStorage.getItem('phoenixToken');
            return {
                'Content-Type': 'application/json',
                'Authorization': token ? `Bearer ${token}` : ''
            };
        };

        /**
         * PROPER API CLIENT - REPLACES fetchAPI
         */
        async function apiRequest(endpoint, options = {}) {
            const token = localStorage.getItem('phoenixToken');
            
            const url = endpoint.startsWith('http') ? endpoint : `${API_BASE}${endpoint}`;
            
            const config = {
                method: options.method || 'GET',
                headers: {
                    'Content-Type': 'application/json',
                    ...(token && { 'Authorization': `Bearer ${token}` }),
                    ...options.headers
                }
            };
            
            if (options.body) {
                config.body = typeof options.body === 'string' ? options.body : JSON.stringify(options.body);
            }
            
            console.log(`üåê ${config.method} ${url}`, options.body ? JSON.parse(config.body) : '');
            
            try {
                const response = await fetch(url, config);
                const data = await response.json();
                
                if (!response.ok) {
                    throw new Error(data.error || `HTTP ${response.status}`);
                }
                
                console.log(`‚úÖ Success:`, data);
                return data;
            } catch (error) {
                console.error(`‚ùå Error:`, error);
                throw error;
            }
        }

        // Keep fetchAPI as alias for backwards compatibility
        const fetchAPI = apiRequest;
    </script>

    <!-- ============================================ -->
    <!-- EXISTING MODULE LOADING -->
    <!-- ============================================ -->
    <script src="src/orchestrator.js"></script>
    <script src="src/api-fix.js"></script>
    <script type="module" src="./src/api.js"></script>
    <script type="module" src="./src/planets.js"></script>
    <script type="module" src="./src/jarvis.js"></script>
    <script type="module" src="./src/reactor.js"></script>
    <script type="module" src="./src/shaders.js"></script>
    <script type="module" src="./src/wearables.js"></script>
    <script src="phoenix-api-client.js"></script>
    <script src="phoenix-conversational-ai.js"></script>

    <!-- ============================================ -->
    <!-- PHOENIX F1 MODULES - 15 Advanced Dashboards -->
    <!-- ============================================ -->
    <!-- Core Intelligence Modules (Fully Implemented) -->
    <script src="src/intelligence-dashboard.js"></script>
    <script src="src/intervention-panel.js"></script>
    <script src="src/prediction-dashboard.js"></script>
    <script src="src/quantum-workout-visualizer.js"></script>

    <!-- Action & Monitoring Modules (Fully Implemented) -->
    <script src="src/butler-command-center.js"></script>
    <script src="src/live-monitor.js"></script>

    <!-- Health & Biometrics Modules (Fully Implemented) -->
    <script src="src/body-composition.js"></script>
    <script src="src/device-manager.js"></script>

    <!-- Lifestyle Modules (Framework Ready) -->
    <script src="src/energy-calendar.js"></script>
    <script src="src/financial-dashboard.js"></script>
    <script src="src/recovery-dashboard.js"></script>
    <script src="src/goal-achievement.js"></script>
    <script src="src/nutrition-intelligence.js"></script>
    <script src="src/life-vision.js"></script>
    <script src="src/voice-interface.js"></script>

    <!-- Embedded Phoenix Engine + F1 Module Initialization -->
    <script src="phoenix-engine.js"></script>
    <script src="phoenix-f1-init.js"></script>
    <script src="workout-modal.js"></script>
    <script src="meal-modal.js"></script>
    <script src="butler-functions.js"></script>
</body>
</html>
